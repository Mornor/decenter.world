# Bitcoin

On 2008-11-01, an email was sent by Satoshi Nakamoto introducing
Bitcoin: A Peer-to-Peer Electronic Cash System [1]. This was followed
on 2009-01-08 by the release of the Bitcoin v0.1 software. When
running this software, the computer running it becomes a Bitcoin node.
Such nodes join other nodes and form the Bitcoin network, which has
its own native currency called the lower-case bitcoin. There's only
ever going to be 21 million bitcoin, which started having value
because people believed them to have value, and the Bitcoin system
may have rather wide-ranging impact on the world.

Although beliefs of people is what creates the value in Bitcoin, and
the system exists to solve problems that people have, since the
actual system fundamentally is software, it is important to understand
what it actually is to make good decisions about it.

So in this article, I will describe the Bitcoin system from a software
perspective. I will try to avoid making the explanation too complex,
but some concepts like public key cryptography and hashing are necessary
components.

The Bitcoin software is a program written in the C++ programming
language, which when running turns the computer it's running on
into a Bitcoin node. In the months and years after Satoshi's
initial emails, more and more people started developing that software,
and even later people started exchanging bitcoin for traditional currency
like US dollars and Euros.

Each Bitcoin node connects to other nodes, and sends messages to those
nodes to find other nodes it doesn't yet know about. The software uses
public key cryptography to generate pairs of public and private keys.
The private keys can be used to sign transactions, which move bitcoin
to a destination address. The addresses are created from the public keys.

Each transaction has inputs and outputs, or debits and credits. There's
actually no coins and no balances in the actual software, but we can
still think of "having 0.25 BTC" in the case where we control private
keys which control unspent transaction outputs that sum up to that
amount.

Only transactions signed by a specific private key controlling a transaction
output are seen by the software as valid, when it comes to spending
that output. The software also adds up all unspent outputs (UTXOs), which
displays the balance in bitcoin.

The bitcoin currency is generated by certain full nodes on the network,
called miners. New bitcoin are generated by solving a specific mathematical
puzzle, which if solved correctly receives some newly issued bitcoin from the
network, as a reward called coinbase. The coinbase reward started out at 50 BTC,
and every 210,000 blocks or 4 years it is reduced by half. This ensures that
the rate at which new bitcoin is issued is predictable and ends up with 21
million bitcoin in total by 2140.

The puzzle that miners solve involves finding inputs to the SHA256 hash function
that are lower than a specific target value, called the difficulty. Hash functions
are by their nature one-way, so there's no way to predict which input values
will result in a desired output, and miners just try different input values
until they find one lower than the difficulty by chance. Solving this puzzle
proves that the miner spent a certain amount of work trying random input values
to the hash function, so it is called a Proof-of-Work.

The correct solution to the puzzle is a hash value, which becomes part of a
block. A block is a group of transactions packaged together, along with some
extra data like the solution to the puzzle. The puzzle is set up in such a
way that the hash value that the miners find also validates that all
transactions are part of the block, using a Merkle hash.

The blocks also reference the previous block, forming a chain of blocks. The
very first block is called the Genesis block, and is included in the source
code of the Bitcoin software. The difficulty value for the puzzle is adjusted
by the Bitcoin software every 2016 blocks, and targets a rate of block production
of one block every 10 minutes. Since the puzzle involves finding an input to
a hash function, the blocks are produced every 10 minute on average only, and
can arrive faster or slower than that as well.

This means that every Bitcoin node can start talking to other nodes around it,
gradually retrieving blocks from the Genesis block onward, and for each block
it can verify that the Proof-of-Work is valid, and that all the transactions
are valid. If a malfunctioning or malicious node feeds our node invalid blocks,
it will simply be ignored. If there's several valid chains available, our node
will follow the chain that has the most accumulated work behind it.

The 10 minute rate of block production gives plenty of time for the entire
network to hear about the latest blocks, which is important for miners so
they don't waste effort trying to mine blocks on the wrong branch of the chain.

Since every node has a copy of the entire blockchain, and every transaction is
stored on the blockchain forever, it is important to not use that limited space
frivolously. Every transaction has inputs and outputs, and by making the sum
of the outputs slightly less than the sum of the inputs, we can implicitly
leave a transaction fee for the miners.

The miners who follow the correct rules will receive the coinbase reward, as
well as all transaction fees of the transactions in the block they mine. This
means that a miner likely will include transactions with higher fees before
those with lower fees, so only the cases which people value enough to pay
sufficient mining fees get mined.

This system can at most fit a handful of transactions every second, and the
average 10 minute block production means that the time to wait until our
transaction is mined into a block is fairly long, as well as unpredictable.
In order to really be certain that we are in control of our bitcoin, we
would need to run our own full nodes, and be very good at protecting our
private keys. There are many kinds of things we might want from digital
money where the Bitcoin blockchain itself is not directly suitable for
these reasons, so we need to keep building more systems to solve those
problems.

[1] https://bitcoin.org/bitcoin.pdf
[2] http://www.metzdowd.com/pipermail/cryptography/2009-January/014994.html






